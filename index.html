<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EXIT</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family:"Hiragino Mincho ProN","MS Mincho",serif;
  background:#000;
  color:#ccc;
  min-height:100vh;
  padding:20px;
  overflow-x:hidden;
}

/* 背景ノイズ */
body::before {
  content:"";
  position:fixed;
  inset:0;
  background:repeating-linear-gradient(
    to bottom,
    rgba(0,255,255,.05) 0,
    rgba(0,255,255,.05) 1px,
    transparent 2px
  );
  opacity:.08;
  pointer-events:none;
  z-index:0;
}

/* コードレイン */
.code-rain {
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
  font-family:"Courier New", monospace;
  font-size:.85rem;
  opacity:.06;
  white-space:pre;
  color:#0ff;
  animation:scrollCode 14s linear infinite;
}
@keyframes scrollCode {
  from { transform:translateY(0); }
  to { transform:translateY(-100%); }
}

.header {
  text-align:center;
  margin-bottom:30px;
  position:relative;
  z-index:5;
}
.title {
  font-size:1.6rem;
  letter-spacing:.12em;
}
.subtitle {
  font-size:.9rem;
  color:#8fa1a1;
  margin-top:8px;
}

/* 画像一覧 */
.image-container {
  columns:5;
  column-gap:15px;
  position:relative;
  z-index:5;
}
.image-item {
  break-inside:avoid;
  margin-bottom:15px;
  border:1px solid #223;
  background:#111;
  cursor:pointer;
  transition:.2s;
}
.image-item:hover { border-color:#0aa; }
.image-item.selected {
  border:2px solid #ff0044;
}

.image-placeholder {
  width:100%;
  aspect-ratio:var(--aspect-ratio);
  overflow:hidden;
}
.image-placeholder img {
  width:100%;
  height:100%;
  object-fit:cover;
}

/* 送信 */
.submit-container {
  text-align:center;
  margin-top:25px;
  position:relative;
  z-index:5;
}
.submit-btn {
  padding:12px 40px;
  letter-spacing:.15em;
  background:#022;
  border:1px solid #0aa;
  color:#cde;
  opacity:.4;
  pointer-events:none;
}
.submit-btn.active {
  opacity:1;
  pointer-events:auto;
}

/* モーダル */
.overlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  z-index:900;
}
.modal {
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:#111;
  border:1px solid #044;
  padding:20px;
  max-width:90vw;
  z-index:901;
}
.modal img {
  max-width: 92vw;
  max-height: 88vh;
  width: auto;
  height: auto;
}
.caption {
  margin-top:10px;
  font-size:.85rem;
}
.modal button {
  margin-top:12px;
  padding:8px 30px;
  background:#022;
  border:1px solid #0aa;
  color:#cde;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="code-rain" id="codeRain"></div>

<div class="header">
  <h1 class="title">Liminal Space脱出口生成フォーム</h1>
  <p class="subtitle">線遠近法が使われている作品を選択してください</p>
</div>

<div class="image-container" id="imageContainer"></div>

<div class="submit-container">
  <button class="submit-btn" id="submitBtn">送信</button>
</div>

<!-- 拡大表示 -->
<div class="overlay" id="viewer">
  <div class="modal">
    <img id="viewerImg">
    <div class="caption" id="viewerCap"></div>
    <button onclick="closeViewer()">閉じる</button>
  </div>
</div>

<script>
/* コードレイン生成 */
const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
let text="";
for(let y=0;y<35;y++){
  let line="";
  for(let x=0;x<80;x++){
    line+=chars[Math.floor(Math.random()*chars.length)];
  }
  text+=line+"\n";
}
document.getElementById("codeRain").textContent=text;

/* ==== 画像＋キャプション定義 ==== */
const images = [
  { type:'other', url:'gazou/1.jpg',  caption:'葛飾北斎《冨嶽三十六景　凱風快晴》1830-1832年' },
  { type:'other', url:'gazou/2.jpg',  caption:'葛飾北斎《冨嶽三十六景　神奈川沖浪裏》1830-1832年' },
  { type:'other', url:'gazou/3.jpg',  caption:'クロード・モネ《睡蓮》1906年' },
  { type:'other', url:'gazou/4.jpg',  caption:'東洲斎写楽《三代目大谷鬼次の奴江戸兵衛》1794年' },
  { type:'other', url:'gazou/5.jpg',  caption:'ポール・セザンヌ《リンゴとプリムローズのポットのある静物》1890年' },
  { type:'other', url:'gazou/6.jpg',  caption:'クロード・モネ《日傘の女性、モネ夫人と息子》1875年' },
  { type:'other', url:'gazou/7.jpg',  caption:'オディロン・ルドン《花瓶（ピンクの背景》1906年' },
  { type:'other', url:'gazou/8.jpg',  caption:'ワシリー・カンディンスキー《緑のセンター》1913年' },
  { type:'other', url:'gazou/9.jpg',  caption:'ワシリー・カンディンスキー《ラ・フレーシュ》1943年' },
  { type:'other', url:'gazou/10.jpg',  caption:'ジョン・エヴァレット・ミレー《オフィーリア》1851年' },
  { type:'other', url:'gazou/11.jpg',  caption:'ポール・セザンヌ《カード遊びをする人々》1890-1892年' },
  { type:'other', url:'gazou/12.jpg',  caption:'ジョルジュ・スーラ《サーカスの客引き》1887-1888年' },
  { type:'other', url:'gazou/13.jpg',  caption:'ジョルジュ・スーラ《ラ・グランデ・ジャッテの日曜日》1884-1886年' },
  { type:'other', url:'gazou/14.jpg',  caption:'アルフォンス・ミュシャ《ゾディアック（「ラプルーム」）》1896-1897年' },
  { type:'other', url:'gazou/15.jpg',  caption:'クロード・モネ《The Houses of Parliament, Sunset》1903年' },
  { type:'other', url:'gazou/16.jpg',  caption:'フィンセント・ファン・ゴッホ《ローヌ川の星月夜》1888年' },
  { type:'other', url:'gazou/17.jpg',  caption:'川瀬巴水《大阪　天王寺》1935年' },
  { type:'other', url:'gazou/18.jpg',  caption:'川瀬巴水《馬込の月》1935年' },
  { type:'other', url:'gazou/19.jpg',  caption:'川瀬巴水《新大橋》1927年' },
  { type:'other', url:'gazou/20.jpg',  caption:'川瀬巴水《芝増上寺》1927年' },
  { type:'other', url:'gazou/21.jpg',  caption:'歌川広重《名所江戸百景　大はしあたけの夕立》1857年' },
  { type:'other', url:'gazou/22.jpg',  caption:'歌川広重《名所江戸百景　上野山内月のまつ》1857年' },
  { type:'other', url:'gazou/23.jpg',  caption:'歌川広重《名所江戸百景　 浅草田甫酉の町詣》1857年' },
  { type:'other', url:'gazou/24.jpg',  caption:'葛飾北斎《諸國瀧廻リ　下野黒髪山　きりふりの滝》1833年' },
  { type:'other', url:'gazou/25.jpg',  caption:'ヨハネス・フェルメール《真珠の耳飾の少女（青いターバンの少女》1655年'},
  { type:'other', url:'gazou/26.jpg',  caption:'柴田是真《盆栽》1882年' },
  { type:'other', url:'gazou/27.jpg',  caption:'大出東皐《猫に蜘蛛図》1888-1892' },
  { type:'other', url:'gazou/28.jpg',  caption:'ルネ・マグリット《レディ・メイドの花束》1956年' },
  { type:'other', url:'gazou/29.jpg',  caption:'ルネ・マグリット《人の子》1964年' },
  { type:'other', url:'gazou/30.jpg',  caption:'ルネ・マグリット《ゴルコンダ》1953年' },
  { type:'other', url:'gazou/31.jpg',  caption:'ルネ・マグリット《ピレネーの城》1959年' },
  { type:'other', url:'gazou/32.jpg',  caption:'ルネ・マグリット《光の帝国》1953-1954年' },
  { type:'other', url:'gazou/33.jpg',  caption:'ルネ・マグリット《リスニングルーム》1952年' },
  { type:'other', url:'gazou/34.jpg',  caption:'ルネ・マグリット《9月16日》1956年' },
  { type:'other', url:'gazou/35.jpg',  caption:'ヨハン・ゾファニー《The Tribuna of the Uffizi 》1772-1777年' },
  { type:'other', url:'gazou/36.jpg',  caption:'エルンスト・ルートヴィヒ・キルヒナー《Czardas Dancers》1908年' },
  { type:'other', url:'gazou/37.jpg',  caption:'ジョゼフ・デュクルー《Self-Portrait, Yawning》1783年' },
  { type:'other', url:'gazou/38.jpg',  caption:'エドゥアール・マネ《フォリー・ベルジェールのバー》1882年' },
  { type:'other', url:'gazou/39.jpg',  caption:'レオナルド・ダ・ヴィンチ《白貂を抱く貴婦人》1489-1490年' },
  { type:'other', url:'gazou/40.jpg',  caption:'パウル・クレー《Ghost of a Genius》1922年' },
  { type:'other', url:'gazou/41.jpg',  caption:'ウィリアム・ホルマン・ハント《The Scapegoat》1854年' },
  { type:'other', url:'gazou/42.jpg',  caption:'河鍋暁斎《暁斎百鬼画談》1889年' },
  { type:'other', url:'gazou/43.jpg',  caption:'川崎巨泉『おもちや千種』1920年' },
  { type:'other', url:'gazou/44.jpg',  caption:'三自翁弘明《白猫》1921年' },
  { type:'other', url:'gazou/45.jpg',  caption:'広重二代　豊国三代合作《江戸自慢三十六興　今戸焼物》1864年' },
  { type:'other', url:'gazou/46.jpg',  caption:'レオナルド・ダ・ヴィンチ《モナリザ》1503-1506年' },
  { type:'other', url:'gazou/47.jpg',  caption:'フィンセント・ファン・ゴッホ《星月夜》1889年' },
  { type:'other', url:'gazou/48.jpg',  caption:'ジャン・オノレ・フラゴナール《ブランコ》1768年' },
  { type:'other', url:'gazou/49.jpg',  caption:'ピエール＝オーギュスト・ルノワール《ムーラン・ド・ラ・ギャレットの舞踏会》1876年' },
  { type:'other', url:'gazou/50.jpg',  caption:'ガブリエル・ローリー《（無題）》1804年' },
  { type:'other', url:'gazou/51.jpg',  caption:'ピート・モンドリアン《コンポジション (No. 1) 灰色と赤》1935年' },
  { type:'other', url:'gazou/52.jpg',  caption:'ピーテル・パウル・ルーベンス《火鉢を持つ老女》1616-1618年' },
  { type:'other', url:'gazou/53.jpg',  caption:'アメデオ・モディリアーニ《緑のブラウスの女の子》1917年' },
  { type:'other', url:'gazou/54.jpg',  caption:'エリオス・グルナー《春の霜》1919年' },
  { type:'other', url:'gazou/55.jpg',  caption:'パウル・クレー《セネシオ》1922年' },
  { type:'other', url:'gazou/56.jpg',  caption:'フィンセント・ファン・ゴッホ《ひまわり》1888年' },
  { type:'other', url:'gazou/57.jpg',  caption:'クロード・モネ《印象・日の出》1872年' },
  { type:'other', url:'gazou/58.jpg',  caption:'ジョン・シンガー・サージェント《カーネーション、リリー、リリー、ローズ》1885年' },
  { type:'other', url:'gazou/59.jpg',  caption:'ジョン・シンガー・サージェント《毒ガスを浴びて》1918年' },
  { type:'other', url:'gazou/60.jpg',  caption:'岸田劉生《麗子微笑》1921年' },
  { type:'other', url:'gazou/61.jpg',  caption:'アンリ・ル・シダネル《薔薇の庭》1926年' },
  { type:'other', url:'gazou/62.jpg',  caption:'ジェームズ・マクニール・ホイッスラー《黒と金色のノクターン-落下する花火》1875年' },
  { type:'other', url:'gazou/63.jpg',  caption:'ホセ・ベンリウレ・イ・ヒル《ローマのカーニバル》1881年' },
  { type:'other', url:'gazou/64.jpg',  caption:'グスタフ・クリムト《ユディト I》1901年' },
  { type:'other', url:'gazou/65.jpg',  caption:'ジェームズ・アンソール《仮面に囲まれた自画像》1899年' },
  { type:'other', url:'gazou/66.jpg',  caption:'エドワード・メイソン・エグルストン《星明かり》1929年' },
  { type:'other', url:'gazou/67.jpg',  caption:'カラヴァッジオ《聖マタイの召命》1599-1600年' },
  { type:'other', url:'gazou/68.jpg',  caption:'チャールズ・コートニー・カラン《夜のパリ》1889年' },
  { type:'other', url:'gazou/69.jpg',  caption:'ヴィルヘルム・ハンマースホイ《中庭の眺め、ストランゲーゼ30番地》1899年' },
  { type:'other', url:'gazou/70.jpg',  caption:'パトリック・ヘンリー・ブルース《静物画》1924年' },
  { type:'other', url:'gazou/71.jpg',  caption:'サンドロ・ボッティチェッリ《ヴィーナスの誕生》1483-1485年' },
  { type:'other', url:'gazou/72.jpg',  caption:'フレデリック・レミントン《カウボーイの没落》1895年' },
  { type:'other', url:'gazou/73.jpg',  caption:'神坂雪佳《立波》1909年' },
  { type:'other', url:'gazou/74.jpg',  caption:'フェルナン・レジェ《エンジン》1918年' },
  { type:'other', url:'gazou/75.jpg',  caption:'ギュスターヴ・カイユボット《アンリ・コルディエ》1883年' },
  { type:'other', url:'gazou/76.jpg',  caption:'エドワード・メイソン・エグルストン《注目の的》1936年' },
  { type:'other', url:'gazou/77.jpg',  caption:'トーマス・ガーティン《デンビー城》1793年' },
  { type:'other', url:'gazou/78.jpg',  caption:'ディエゴ・リベラ《サン・マルティン橋》1913年' },
  { type:'other', url:'gazou/79.jpg',  caption:'フリーダ・カーロ《オウムと旗のある静物》1951年' },
  { type:'other', url:'gazou/80.jpg',  caption:'カジミール・マレーヴィチ《シュプレムス No.55》1916年'},
  { type:'other', url:'gazou/81.jpg',  caption:'伊藤若冲《象図》1789年' },
  { type:'other', url:'gazou/82.jpg',  caption:'古賀春江《海》1929年' },
  { type:'other', url:'gazou/83.jpg',  caption:'東洲斎写楽《二代目市川高麗蔵の亀屋忠兵衛と初代中山富三郎の梅川》年代不詳' },
  { type:'other', url:'gazou/84.jpg',  caption:'藤島武二《蝶》1904年' },
  { type:'other', url:'gazou/85.jpg',  caption:'カイ・ニールセン《薔薇のゆりかごにのせた妖精の息子を運ぶ西風》年代不詳' },
  { type:'other', url:'gazou/86.jpg',  caption:'カイ・ニールセン《巨人の心臓が隠された湖に浮かぶ島の教会にたどり着く末っ子の王子》年代不詳' },
  { type:'other', url:'gazou/87.jpg',  caption:'岡本帰一《學校ゴツゴ》1926年' },
  { type:'other', url:'gazou/88.jpg',  caption:'北澤楽天《うぐいすのコーラ―ス》1916年' },
  { type:'other', url:'gazou/89.jpg',  caption:'J・C・ライエンデッカー《デッキチェア上のふたり》1904年' },
  { type:'other', url:'gazou/90.jpg',  caption:'ルイ・イカール《蝶の女（赤）》1936年' },
  { type:'other', url:'gazou/91.jpg',  caption:'N・C・ワイエス 《ローズ・ソルターンと白い魔女》 1920年' },
  { type:'other', url:'gazou/92.jpg',  caption:'ジョージ・グッドウィン・キルバーン《ピアノの練習》1924年' },
  { type:'other', url:'gazou/93.jpg',  caption:'アルバート・ムーア《夢見る人々》1850-1882年' },
  { type:'other', url:'gazou/94.jpg',  caption:'アドルフ・フォン・メンツェル《バルコニーの部屋》1845年' },
  { type:'other', url:'gazou/95.jpg',  caption:'エドガー・ドガ《待ち合わせ》1882年' },
  { type:'other', url:'gazou/96.jpg',  caption:'ヴァルター・シュピース《メリーゴーランド》1922年' },
  { type:'other', url:'gazou/97.jpg',  caption:'ヨハネス・フェルメール《天文学者》1668年' },
  { type:'other', url:'gazou/98.jpg',  caption:'ジョヴァンニ・バッティスタ・ティエポロ《聖セシリア》1750-1760年' },
  { type:'other', url:'gazou/99.jpg',  caption:'アンソニー・ヴァン・ダイク《十字架の聖フランチェス》1625-1629年' },
  { type:'door',  url:'gazou/door.jpg', caption:'フィンセント・ファン・ゴッホ《Corridor in the Asylum》1889年' }
];

/* シャッフル（captionは保持） */
images.sort(()=>Math.random()-.5);

const container=document.getElementById("imageContainer");
let selected=null;

images.forEach(img=>{
  const item=document.createElement("div");
  item.className="image-item";
  item.dataset.type=img.type;

  const ph=document.createElement("div");
  ph.className="image-placeholder";
  ph.style.setProperty("--aspect-ratio",0.8);

  const im=document.createElement("img");
  im.src=img.url;
  ph.appendChild(im);

  item.appendChild(ph);

  item.onclick=()=>{
    if(selected) selected.classList.remove("selected");
    selected=item;
    item.classList.add("selected");
    document.getElementById("submitBtn").classList.add("active");
    openViewer(img);
  };

  container.appendChild(item);
});

/* 拡大表示 */
function openViewer(img){
  document.getElementById("viewerImg").src=img.url;
  document.getElementById("viewerCap").textContent=img.caption;
  document.getElementById("viewer").style.display="block";
}
function closeViewer(){
  document.getElementById("viewer").style.display="none";
}

/* 送信 */
document.getElementById("submitBtn").onclick=()=>{
  if(!selected) return;
  if(selected.dataset.type==="door"){
    location.href="https://hazamashobo.github.io/fin/";
  } else {
    alert("出口ではありません");
  }
};
</script>

</body>
</html>
